@using AccentureAcademyLibrary.Models
@model Editoriales
@{
    ViewBag.Title = "Agregar";
}

@using (Html.BeginForm())
{
    @Html.LabelFor(editorial => editorial.NombreEditorial);
    @Html.EditorFor(editorial => editorial.NombreEditorial,
        new
        {
            htmlAttributes = new
            {
                @class = "form-control",
                placeholder = "Ingrese el nombre de la editorial"
            }
        });
    <div class="text-right" style="color:red">
        @Html.ValidationMessageFor(editorial => editorial.NombreEditorial)
    </div>

    @Html.LabelFor(editorial => editorial.Pais);
    @Html.EditorFor(editorial => editorial.Pais,
            new
            {
                htmlAttributes = new
                {
                    @class = "form-control",
                    placeholder = "Ingrese el País"
                }
            });
    <div class="text-right" style="color:red">
        @Html.ValidationMessageFor(editorial => editorial.Pais)
    </div>

    @Html.LabelFor(editorial => editorial.Website);
    @Html.EditorFor(editorial => editorial.Website,
            new
            {
                htmlAttributes = new
                {
                    @type = "url",
                    @class = "form-control",
                    placeholder = "Ingrese el sitio web"
                }
            });
    <div class="text-right" style="color:red">
        @Html.ValidationMessageFor(editorial => editorial.Website)
    </div>


    <script>
            function postbackForm() {
                var request = new XMLHttpRequest();
                request.open("POST", window.location.pathname)
                request.onreadystatechange = function (resp) {
                    if ((resp.currentTarget.status == 200)
                        && (resp.currentTarget.readyState == 4)) {
                        return window.location.href=window.location.origin+'/Editorial/Listar'
                    }
                }
                var formulario = document.getElementsByTagName("form")[0];
                request.send(new FormData(formulario));
            }
    </script>

    <button type="button" class="btn btn-primary form-control"
            style="margin-top:1em" onclick="postbackForm()">
        Enviar
    </button>
}